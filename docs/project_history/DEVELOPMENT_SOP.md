# 開發跑通確認原則 (SOP) - 標準作業程序

**版本**: 1.0  
**日期**: 2026年2月4日  
**適用範圍**: QIP SPC Data Analyzer 設計改進實施

---

## 核心原則

### 1. 精準修改 (Precision Modification)
- ✅ 僅針對必要部分進行修訂
- ✅ 避免不必要的邏輯變動
- ✅ 防止改了 A 問題卻出現 B 問題的困境
- ✅ 每次修改前進行影響分析

### 2. 運行測試 (Runtime Testing)
- ✅ 聲明完成前必須透過瀏覽器開發者工具完成實際環境測試
- ✅ 確保功能正確且無 Console 錯誤
- ✅ 檢查所有相關組件的正常運作
- ✅ 驗證沒有副作用

### 3. 開發紀錄 (Development Logging)
- ✅ 留存開發階段所有失敗的紀錄與原因分析
- ✅ 記錄矯正措施
- ✅ 整理成文檔作為後續開發參考
- ✅ 建立知識庫

### 4. 檔案整理 (File Organization)
- ✅ 基於 MECE 原則檢查及整理專案檔案與內容
- ✅ 進行合理的配置及整合
- ✅ 必要時補足或刪減
- ✅ 保持結構清晰

---

## 實施流程

### 階段 1: 準備 (Preparation)

#### 1.1 影響分析
```
步驟:
1. 識別要修改的組件
2. 分析相關依賴
3. 列出可能的副作用
4. 制定回滾計劃
```

#### 1.2 測試計劃
```
步驟:
1. 定義測試場景
2. 準備測試數據
3. 設置測試環境
4. 準備測試工具
```

#### 1.3 文檔準備
```
步驟:
1. 創建開發日誌
2. 準備失敗記錄模板
3. 準備矯正措施模板
4. 準備知識庫模板
```

### 階段 2: 開發 (Development)

#### 2.1 代碼修改
```
步驟:
1. 進行精準修改
2. 添加代碼註釋
3. 保存修改
4. 記錄修改內容
```

#### 2.2 本地測試
```
步驟:
1. 運行 npm run build
2. 檢查編譯錯誤
3. 檢查 ESLint 警告
4. 檢查類型錯誤
```

#### 2.3 瀏覽器測試
```
步驟:
1. 打開開發者工具 (F12)
2. 進入 Console 標籤
3. 清除之前的日誌
4. 執行功能測試
5. 檢查是否有錯誤
6. 檢查是否有警告
```

### 階段 3: 驗證 (Verification)

#### 3.1 功能驗證
```
步驟:
1. 驗證主要功能
2. 驗證相關功能
3. 驗證邊界情況
4. 驗證錯誤處理
```

#### 3.2 性能驗證
```
步驟:
1. 檢查加載時間
2. 檢查渲染性能
3. 檢查內存使用
4. 檢查網絡請求
```

#### 3.3 可訪問性驗證
```
步驟:
1. 檢查鍵盤導航
2. 檢查屏幕閱讀器
3. 檢查對比度
4. 檢查焦點指示
```

### 階段 4: 記錄 (Logging)

#### 4.1 成功記錄
```
記錄內容:
- 修改內容
- 測試結果
- 性能指標
- 驗證時間
```

#### 4.2 失敗記錄
```
記錄內容:
- 失敗描述
- 錯誤信息
- 原因分析
- 矯正措施
- 驗證結果
```

#### 4.3 知識庫更新
```
更新內容:
- 常見問題
- 解決方案
- 最佳實踐
- 參考資源
```

### 階段 5: 整理 (Organization)

#### 5.1 代碼整理
```
步驟:
1. 檢查代碼風格
2. 檢查命名規範
3. 檢查註釋完整性
4. 檢查導入順序
```

#### 5.2 文件整理
```
步驟:
1. 檢查文件結構
2. 檢查文件命名
3. 檢查文件位置
4. 檢查文件內容
```

#### 5.3 文檔整理
```
步驟:
1. 更新 README
2. 更新 API 文檔
3. 更新變更日誌
4. 更新知識庫
```

---

## 檢查清單

### 代碼修改檢查清單
- [ ] 修改內容明確
- [ ] 影響分析完成
- [ ] 代碼風格一致
- [ ] 註釋完整
- [ ] 沒有調試代碼
- [ ] 沒有 console.log
- [ ] 沒有 TODO 標記

### 測試檢查清單
- [ ] 本地編譯成功
- [ ] 沒有 ESLint 錯誤
- [ ] 沒有類型錯誤
- [ ] 瀏覽器無 Console 錯誤
- [ ] 主要功能正常
- [ ] 相關功能正常
- [ ] 邊界情況正常
- [ ] 性能指標正常

### 文檔檢查清單
- [ ] 開發日誌完整
- [ ] 失敗記錄完整
- [ ] 矯正措施記錄
- [ ] 知識庫更新
- [ ] 變更日誌更新
- [ ] README 更新

### 文件整理檢查清單
- [ ] 文件結構清晰
- [ ] 文件命名規範
- [ ] 文件位置合理
- [ ] 沒有重複文件
- [ ] 沒有孤立文件
- [ ] 導入路徑正確

---

## 開發日誌模板

```markdown
# 開發日誌 - [功能名稱]

**日期**: [YYYY-MM-DD]  
**開發者**: [名稱]  
**狀態**: [進行中/完成/失敗]

## 修改內容
- 修改文件: [文件路徑]
- 修改類型: [新增/修改/刪除]
- 修改描述: [詳細描述]

## 測試結果
- 編譯: ✅ 成功 / ❌ 失敗
- ESLint: ✅ 通過 / ❌ 失敗
- 類型檢查: ✅ 通過 / ❌ 失敗
- 瀏覽器測試: ✅ 通過 / ❌ 失敗

## 失敗記錄 (如果有)
- 失敗描述: [描述]
- 錯誤信息: [錯誤信息]
- 原因分析: [分析]
- 矯正措施: [措施]
- 驗證結果: [結果]

## 性能指標
- 加載時間: [時間]
- 渲染時間: [時間]
- 內存使用: [大小]

## 備註
[其他備註]
```

---

## 失敗記錄模板

```markdown
# 失敗記錄 - [功能名稱]

**日期**: [YYYY-MM-DD]  
**開發者**: [名稱]  
**嚴重程度**: [低/中/高]

## 失敗描述
[詳細描述失敗情況]

## 錯誤信息
\`\`\`
[完整的錯誤信息]
\`\`\`

## 原因分析
1. [第一個可能原因]
2. [第二個可能原因]
3. [第三個可能原因]

**最可能原因**: [分析結果]

## 矯正措施
1. [第一個措施]
2. [第二個措施]
3. [第三個措施]

## 驗證結果
- 措施 1: ✅ 成功 / ❌ 失敗
- 措施 2: ✅ 成功 / ❌ 失敗
- 措施 3: ✅ 成功 / ❌ 失敗

**最終結果**: ✅ 解決 / ❌ 未解決

## 知識庫更新
- 新增問題: [問題]
- 新增解決方案: [方案]
- 新增最佳實踐: [實踐]

## 參考資源
- [資源 1]
- [資源 2]
```

---

## 知識庫模板

```markdown
# 知識庫 - [主題]

## 常見問題

### Q1: [問題描述]
**A**: [解決方案]

### Q2: [問題描述]
**A**: [解決方案]

## 最佳實踐

### 實踐 1: [實踐名稱]
[詳細說明]

### 實踐 2: [實踐名稱]
[詳細說明]

## 參考資源
- [資源 1]
- [資源 2]

## 相關文檔
- [文檔 1]
- [文檔 2]
```

---

## 瀏覽器開發者工具檢查指南

### 打開開發者工具
```
Windows/Linux: F12 或 Ctrl+Shift+I
Mac: Cmd+Option+I
```

### Console 標籤檢查
```
1. 清除之前的日誌: console.clear() 或點擊清除按鈕
2. 執行功能
3. 檢查是否有紅色錯誤
4. 檢查是否有黃色警告
5. 檢查是否有藍色信息
```

### Network 標籤檢查
```
1. 打開 Network 標籤
2. 清除之前的請求
3. 執行功能
4. 檢查是否有紅色失敗請求
5. 檢查響應時間
6. 檢查響應大小
```

### Performance 標籤檢查
```
1. 打開 Performance 標籤
2. 點擊記錄按鈕
3. 執行功能
4. 停止記錄
5. 分析性能指標
6. 檢查是否有長任務
```

### Elements 標籤檢查
```
1. 打開 Elements 標籤
2. 檢查 DOM 結構
3. 檢查 CSS 樣式
4. 檢查是否有隱藏元素
5. 檢查是否有重複元素
```

---

## 文件整理 MECE 原則

### 原則定義
- **M** (Mutually Exclusive): 相互排斥 - 每個文件有唯一的位置
- **E** (Collectively Exhaustive): 完全窮盡 - 所有文件都有位置

### 應用步驟

#### 1. 分類
```
按功能分類:
- 組件 (Components)
- 工具 (Utils)
- 樣式 (Styles)
- 文檔 (Docs)
- 配置 (Config)
```

#### 2. 檢查
```
檢查項目:
- 是否有重複文件
- 是否有孤立文件
- 是否有誤放文件
- 是否有缺失文件
```

#### 3. 整理
```
整理步驟:
- 移動誤放文件
- 刪除重複文件
- 補充缺失文件
- 更新導入路徑
```

#### 4. 驗證
```
驗證步驟:
- 編譯成功
- 沒有導入錯誤
- 沒有路徑錯誤
- 結構清晰
```

---

## 實施時間表

### 第 1 週: 準備和基礎設施
- [ ] 創建 SOP 文檔
- [ ] 準備開發日誌模板
- [ ] 準備失敗記錄模板
- [ ] 準備知識庫模板
- [ ] 設置開發環境

### 第 2 週: 設計系統實施
- [ ] 實施色彩系統
- [ ] 實施排版系統
- [ ] 實施間距系統
- [ ] 記錄所有修改
- [ ] 進行瀏覽器測試

### 第 3 週: 組件改進
- [ ] 改進按鈕設計
- [ ] 改進卡片設計
- [ ] 改進輸入框設計
- [ ] 改進嚮導設計
- [ ] 記錄所有修改

### 第 4 週: 整理和驗證
- [ ] 整理代碼
- [ ] 整理文件
- [ ] 整理文檔
- [ ] 最終測試
- [ ] 知識庫更新

---

## 成功指標

### 代碼質量
- ✅ 0 個 ESLint 錯誤
- ✅ 0 個類型錯誤
- ✅ 0 個 Console 錯誤
- ✅ 代碼覆蓋率 > 80%

### 測試覆蓋
- ✅ 所有功能已測試
- ✅ 所有邊界情況已測試
- ✅ 所有錯誤情況已測試
- ✅ 性能指標正常

### 文檔完整性
- ✅ 開發日誌完整
- ✅ 失敗記錄完整
- ✅ 知識庫完整
- ✅ 變更日誌完整

### 文件組織
- ✅ 文件結構清晰
- ✅ 沒有重複文件
- ✅ 沒有孤立文件
- ✅ 導入路徑正確

---

## 故障排除指南

### 常見問題 1: Console 出現錯誤
```
步驟:
1. 記錄完整的錯誤信息
2. 分析錯誤堆棧
3. 定位錯誤位置
4. 檢查相關代碼
5. 修復錯誤
6. 重新測試
```

### 常見問題 2: 功能不正常
```
步驟:
1. 檢查是否有 Console 錯誤
2. 檢查是否有網絡錯誤
3. 檢查是否有邏輯錯誤
4. 檢查相關組件
5. 檢查相關樣式
6. 修復問題
```

### 常見問題 3: 性能下降
```
步驟:
1. 使用 Performance 標籤分析
2. 識別瓶頸
3. 檢查是否有長任務
4. 檢查是否有內存洩漏
5. 優化代碼
6. 重新測試
```

### 常見問題 4: 樣式不正確
```
步驟:
1. 打開 Elements 標籤
2. 檢查 DOM 結構
3. 檢查 CSS 樣式
4. 檢查是否有衝突
5. 修復樣式
6. 重新測試
```

---

## 結論

本 SOP 文檔提供了完整的開發流程指南，確保：
- ✅ 精準修改，避免副作用
- ✅ 完整測試，確保質量
- ✅ 詳細記錄，便於參考
- ✅ 清晰組織，易於維護

**建議**: 嚴格遵循本 SOP，確保開發質量和效率。
